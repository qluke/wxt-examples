# Project Files Export

Export time: 2025/8/1 16:53:09

Source directory: `favicon-tracker`

Output file: `project-files.md`

## Directory Structure

```
favicon-tracker
├── .wxt
├── entrypoints
├── public
├── utils
├── explain.md
├── package.json
├── README.md
├── tsconfig.json
└── wxt.config.ts
```

## File Statistics

- Total files: 20
- Total size: 15.2 KB

### File Type Distribution

| Extension | Files | Total Size |
| --- | --- | --- |
| .ts | 13 | 13.1 KB |
| .json | 3 | 1.1 KB |
| .md | 2 | 151 bytes |
| .html | 1 | 389 bytes |
| .css | 1 | 538 bytes |

## File Contents

### .wxt\tsconfig.json

```json
// .wxt\tsconfig.json
{
  "compilerOptions": {
    "target": "ESNext",
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "noEmit": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "strict": true,
    "skipLibCheck": true,
    "paths": {
      "@": [".."],
      "@/*": ["../*"],
      "~": [".."],
      "~/*": ["../*"],
      "@@": [".."],
      "@@/*": ["../*"],
      "~~": [".."],
      "~~/*": ["../*"]
    }
  },
  "include": [
    "../**/*",
    "./wxt.d.ts"
  ],
  "exclude": ["../.output"]
}
```

### .wxt\types\globals.d.ts

```typescript
// .wxt\types\globals.d.ts
// Generated by wxt
interface ImportMetaEnv {
  readonly MANIFEST_VERSION: 2 | 3;
  readonly BROWSER: string;
  readonly CHROME: boolean;
  readonly FIREFOX: boolean;
  readonly SAFARI: boolean;
  readonly EDGE: boolean;
  readonly OPERA: boolean;
  readonly COMMAND: "build" | "serve";
  readonly ENTRYPOINT: string;
}
interface ImportMeta {
  readonly env: ImportMetaEnv
}

```

### .wxt\types\i18n.d.ts

```typescript
// .wxt\types\i18n.d.ts
// Generated by wxt
import "wxt/browser";

declare module "wxt/browser" {
  /**
   * See https://developer.chrome.com/docs/extensions/reference/i18n/#method-getMessage
   */
  interface GetMessageOptions {
    /**
     * See https://developer.chrome.com/docs/extensions/reference/i18n/#method-getMessage
     */
    escapeLt?: boolean
  }

  export interface WxtI18n extends I18n.Static {
    /**
     * The extension or app ID; you might use this string to construct URLs for resources inside the extension. Even unlocalized extensions can use this message.
     * Note: You can't use this message in a manifest file.
     *
     * "<browser.runtime.id>"
     */
    getMessage(
      messageName: "@@extension_id",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
    /**
     * "<browser.i18n.getUiLocale()>"
     */
    getMessage(
      messageName: "@@ui_locale",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
    /**
     * The text direction for the current locale, either "ltr" for left-to-right languages such as English or "rtl" for right-to-left languages such as Japanese.
     *
     * "<ltr|rtl>"
     */
    getMessage(
      messageName: "@@bidi_dir",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
    /**
     * If the @@bidi_dir is "ltr", then this is "rtl"; otherwise, it's "ltr".
     *
     * "<rtl|ltr>"
     */
    getMessage(
      messageName: "@@bidi_reversed_dir",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
    /**
     * If the @@bidi_dir is "ltr", then this is "left"; otherwise, it's "right".
     *
     * "<left|right>"
     */
    getMessage(
      messageName: "@@bidi_start_edge",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
    /**
     * If the @@bidi_dir is "ltr", then this is "right"; otherwise, it's "left".
     *
     * "<right|left>"
     */
    getMessage(
      messageName: "@@bidi_end_edge",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
    getMessage(
      messageName: "@@extension_id" | "@@ui_locale" | "@@bidi_dir" | "@@bidi_reversed_dir" | "@@bidi_start_edge" | "@@bidi_end_edge",
      substitutions?: string | string[],
      options?: GetMessageOptions,
    ): string;
  }
}

```

### .wxt\types\imports-module.d.ts

```typescript
// .wxt\types\imports-module.d.ts
// Generated by wxt
// Types for the #import virtual module
declare module '#imports' {
  export { browser, Browser } from 'wxt/browser';
  export { storage, StorageArea, WxtStorage, WxtStorageItem, StorageItemKey, StorageAreaChanges, MigrationError } from 'wxt/utils/storage';
  export { useAppConfig } from 'wxt/utils/app-config';
  export { ContentScriptContext, WxtWindowEventMap } from 'wxt/utils/content-script-context';
  export { createIframeUi, IframeContentScriptUi, IframeContentScriptUiOptions } from 'wxt/utils/content-script-ui/iframe';
  export { createIntegratedUi, IntegratedContentScriptUi, IntegratedContentScriptUiOptions } from 'wxt/utils/content-script-ui/integrated';
  export { createShadowRootUi, ShadowRootContentScriptUi, ShadowRootContentScriptUiOptions } from 'wxt/utils/content-script-ui/shadow-root';
  export { ContentScriptUi, ContentScriptUiOptions, ContentScriptOverlayAlignment, ContentScriptAppendMode, ContentScriptInlinePositioningOptions, ContentScriptOverlayPositioningOptions, ContentScriptModalPositioningOptions, ContentScriptPositioningOptions, ContentScriptAnchoredOptions, AutoMountOptions, StopAutoMount, AutoMount } from 'wxt/utils/content-script-ui/types';
  export { defineAppConfig, WxtAppConfig } from 'wxt/utils/define-app-config';
  export { defineBackground } from 'wxt/utils/define-background';
  export { defineContentScript } from 'wxt/utils/define-content-script';
  export { defineUnlistedScript } from 'wxt/utils/define-unlisted-script';
  export { defineWxtPlugin } from 'wxt/utils/define-wxt-plugin';
  export { injectScript, ScriptPublicPath, InjectScriptOptions } from 'wxt/utils/inject-script';
  export { InvalidMatchPattern, MatchPattern } from 'wxt/utils/match-patterns';
  export { fakeBrowser } from 'wxt/testing';
  export { openExtensionDatabase, ExtensionDatabase } from '../utils/database';
  export { registerFaviconService, getFaviconService, FaviconService } from '../utils/favicon-service';
  export { FaviconInfo } from '../utils/types';
}

```

### .wxt\types\imports.d.ts

```typescript
// .wxt\types\imports.d.ts
// Generated by wxt
export {}
declare global {
  const ContentScriptContext: typeof import('wxt/utils/content-script-context')['ContentScriptContext']
  const InvalidMatchPattern: typeof import('wxt/utils/match-patterns')['InvalidMatchPattern']
  const MatchPattern: typeof import('wxt/utils/match-patterns')['MatchPattern']
  const browser: typeof import('wxt/browser')['browser']
  const createIframeUi: typeof import('wxt/utils/content-script-ui/iframe')['createIframeUi']
  const createIntegratedUi: typeof import('wxt/utils/content-script-ui/integrated')['createIntegratedUi']
  const createShadowRootUi: typeof import('wxt/utils/content-script-ui/shadow-root')['createShadowRootUi']
  const defineAppConfig: typeof import('wxt/utils/define-app-config')['defineAppConfig']
  const defineBackground: typeof import('wxt/utils/define-background')['defineBackground']
  const defineContentScript: typeof import('wxt/utils/define-content-script')['defineContentScript']
  const defineUnlistedScript: typeof import('wxt/utils/define-unlisted-script')['defineUnlistedScript']
  const defineWxtPlugin: typeof import('wxt/utils/define-wxt-plugin')['defineWxtPlugin']
  const fakeBrowser: typeof import('wxt/testing')['fakeBrowser']
  const getFaviconService: typeof import('D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/favicon-service')['getFaviconService']
  const injectScript: typeof import('wxt/utils/inject-script')['injectScript']
  const openExtensionDatabase: typeof import('D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/database')['openExtensionDatabase']
  const registerFaviconService: typeof import('D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/favicon-service')['registerFaviconService']
  const storage: typeof import('wxt/utils/storage')['storage']
  const useAppConfig: typeof import('wxt/utils/app-config')['useAppConfig']
}
// for type re-export
declare global {
  // @ts-ignore
  export type { Browser } from 'wxt/browser'
  import('wxt/browser')
  // @ts-ignore
  export type { StorageArea, WxtStorage, WxtStorageItem, StorageItemKey, StorageAreaChanges, MigrationError } from 'wxt/utils/storage'
  import('wxt/utils/storage')
  // @ts-ignore
  export type { WxtWindowEventMap } from 'wxt/utils/content-script-context'
  import('wxt/utils/content-script-context')
  // @ts-ignore
  export type { IframeContentScriptUi, IframeContentScriptUiOptions } from 'wxt/utils/content-script-ui/iframe'
  import('wxt/utils/content-script-ui/iframe')
  // @ts-ignore
  export type { IntegratedContentScriptUi, IntegratedContentScriptUiOptions } from 'wxt/utils/content-script-ui/integrated'
  import('wxt/utils/content-script-ui/integrated')
  // @ts-ignore
  export type { ShadowRootContentScriptUi, ShadowRootContentScriptUiOptions } from 'wxt/utils/content-script-ui/shadow-root'
  import('wxt/utils/content-script-ui/shadow-root')
  // @ts-ignore
  export type { ContentScriptUi, ContentScriptUiOptions, ContentScriptOverlayAlignment, ContentScriptAppendMode, ContentScriptInlinePositioningOptions, ContentScriptOverlayPositioningOptions, ContentScriptModalPositioningOptions, ContentScriptPositioningOptions, ContentScriptAnchoredOptions, AutoMountOptions, StopAutoMount, AutoMount } from 'wxt/utils/content-script-ui/types'
  import('wxt/utils/content-script-ui/types')
  // @ts-ignore
  export type { WxtAppConfig } from 'wxt/utils/define-app-config'
  import('wxt/utils/define-app-config')
  // @ts-ignore
  export type { ScriptPublicPath, InjectScriptOptions } from 'wxt/utils/inject-script'
  import('wxt/utils/inject-script')
  // @ts-ignore
  export type { ExtensionDatabase } from 'D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/database'
  import('D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/database')
  // @ts-ignore
  export type { FaviconService } from 'D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/favicon-service'
  import('D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/favicon-service')
  // @ts-ignore
  export type { FaviconInfo } from 'D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/types'
  import('D:/55/wxt-dev-examples/examples/examples/favicon-tracker/utils/types')
}

```

### .wxt\types\paths.d.ts

```typescript
// .wxt\types\paths.d.ts
// Generated by wxt
import "wxt/browser";

declare module "wxt/browser" {
  export type PublicPath =
    | ""
    | "/"
    | "/background.js"
    | "/content-scripts/content.js"
    | "/icon/128.png"
    | "/icon/16.png"
    | "/icon/32.png"
    | "/icon/48.png"
    | "/icon/96.png"
    | "/popup.html"
  type HtmlPublicPath = Extract<PublicPath, `${string}.html`>
  export interface WxtRuntime {
    getURL(path: PublicPath): string;
    getURL(path: `${HtmlPublicPath}${string}`): string;
  }
}

```

### .wxt\wxt.d.ts

```typescript
// .wxt\wxt.d.ts
// Generated by wxt
/// <reference types="wxt/vite-builder-env" />
/// <reference path="./types/paths.d.ts" />
/// <reference path="./types/i18n.d.ts" />
/// <reference path="./types/globals.d.ts" />
/// <reference path="./types/imports-module.d.ts" />
/// <reference path="./types/imports.d.ts" />

```

### entrypoints\background.ts

```typescript
// entrypoints\background.ts
export default defineBackground(() => {
  // Open database
  const db = openExtensionDatabase();

  // Register proxy-service so other JS context's can get or insert favicons
  const faviconService = registerFaviconService(db);

  // Store favicons of websites you navigated to
  browser.tabs.onUpdated.addListener(async (id) => {
    // Grab all the tab details
    const tab = await browser.tabs.get(id);
    const url = tab.url ?? tab.pendingUrl;
    const faviconUrl = tab.favIconUrl;
    if (!url || !faviconUrl) return;

    // Add favicon to database
    const hostname = new URL(url).hostname;
    console.log(`Saving ${hostname}: ${faviconUrl}`);
    await faviconService.upsert({ hostname, faviconUrl });
  });
});

```

### entrypoints\content.ts

```typescript
// entrypoints\content.ts
export default defineContentScript({
  matches: ["*://*.google.com/*"],
  main() {
    console.log("Hello content.");
  },
});

```

### entrypoints\popup\index.html

```html
// entrypoints\popup\index.html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Default Popup Title</title>
    <meta name="manifest.type" content="browser_action" />
  </head>
  <body>
    <div id="app">
      <p>Loading...</p>
    </div>
    <script type="module" src="./main.ts"></script>
  </body>
</html>

```

### entrypoints\popup\main.ts

```typescript
// entrypoints\popup\main.ts
import "./style.css";

declare const app: HTMLDivElement;
const faviconService = getFaviconService();

loadFavicons();

async function loadFavicons() {
  // Load favicons
  app.innerHTML = "<p>Loading...</p>";
  const favicons = await faviconService.getAll();
  app.removeChild(app.firstChild!);

  // Render favicons
  favicons.map((favicon) => {
    const img = getFaviconImg(favicon);
    app.append(img);
  });
}

function getFaviconImg(info: FaviconInfo) {
  const img = document.createElement("img");
  img.src = info.faviconUrl;
  img.title = info.hostname;
  return img;
}

```

### entrypoints\popup\style.css

```css
// entrypoints\popup\style.css
/* Reset */
html,
body {
  padding: 0;
  margin: 0;
  min-width: 0;
}

body {
  background-color: #202428;
  color: white;
  width: 300px;
  height: 300px;
  padding: 16px;
}

#app {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  align-items: start;
  justify-content: start;
  gap: 16px;
}

img {
  width: 32px;
  height: 32px;
  padding: 4px;
  box-sizing: border-box;
  outline: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 4px;
  transition: 250ms;
  cursor: pointer;
}

img:hover {
  background-color: black;
}

```

### explain.md

```markdown
// explain.md

```

### package.json

```json
// package.json
{
  "name": "favicon-tracker",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "wxt",
    "dev:firefox": "wxt -b firefox",
    "build": "wxt build",
    "build:firefox": "wxt build -b firefox",
    "zip": "wxt zip",
    "zip:firefox": "wxt zip -b firefox",
    "compile": "tsc --noEmit",
    "postinstall": "wxt prepare"
  },
  "dependencies": {
    "@webext-core/proxy-service": "^1.2.0",
    "idb": "^8.0.0"
  },
  "devDependencies": {
    "typescript": "^5.8.2",
    "wxt": "^0.20.5"
  }
}

```

### README.md

```markdown
// README.md
---
name: Favicon Tracker
description: Track and save favicons for all the websites you've been to.
apis:
  - indexeddb
---

```sh
pnpm i
pnpm dev
```

```

### tsconfig.json

```json
// tsconfig.json
{
  "extends": "./.wxt/tsconfig.json"
}

```

### utils\database.ts

```typescript
// utils\database.ts
import { DBSchema, IDBPDatabase, openDB } from "idb";
import { FaviconInfo } from "./types";

interface ExtensionDatabaseSchema extends DBSchema {
  favicons: {
    key: string;
    value: FaviconInfo;
  };
}

export type ExtensionDatabase = IDBPDatabase<ExtensionDatabaseSchema>;

export function openExtensionDatabase(): Promise<ExtensionDatabase> {
  return openDB<ExtensionDatabaseSchema>("favicon-tracker", 1, {
    upgrade(database) {
      database.createObjectStore("favicons", { keyPath: "hostname" });
    },
  });
}

```

### utils\favicon-service.ts

```typescript
// utils\favicon-service.ts
import { defineProxyService } from "@webext-core/proxy-service";
import type { FaviconInfo } from "./types";
import type { ExtensionDatabase } from "./database";

export interface FaviconService {
  getAll(): Promise<FaviconInfo[]>;
  upsert(info: FaviconInfo): Promise<void>;
}

function createFaviconService(_db: Promise<ExtensionDatabase>): FaviconService {
  return {
    async getAll() {
      // Can't await promises inside the background's main function, so instead
      // we await the promise inside the service:
      const db = await _db;
      return await db.getAll("favicons");
    },
    async upsert(info) {
      const db = await _db;
      await db.put("favicons", info);
    },
  };
}

export const [registerFaviconService, getFaviconService] = defineProxyService(
  "favicon-service",
  createFaviconService,
);

```

### utils\types.ts

```typescript
// utils\types.ts
export interface FaviconInfo {
  hostname: string;
  faviconUrl: string;
}

```

### wxt.config.ts

```typescript
// wxt.config.ts
import { defineConfig } from "wxt";

// See https://wxt.dev/api/config.html
export default defineConfig({
  manifest: {
    permissions: ["tabs"],
  },
  webExt: {
    startUrls: [
      "https://google.com",
      "https://duckduckgo.com",
      "https://wxt.dev",
      "https://vitest.dev/",
      "https://vitejs.dev",
      "https://www.typescriptlang.org/",
      "https://react.dev/",
      "https://vuejs.org/",
      "https://svelte.dev/",
      "https://developer.mozilla.org/",
      "https://stackoverflow.com/",
      "https://figma.com/",
      "https://youtube.com/",
      "https://instagram.com/",
      "https://reddit.com/",
    ],
  },
});

```

